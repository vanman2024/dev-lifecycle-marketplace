healthChecks:
  version: "1.0.0"
  description: "Health check configuration for deployment validation"

  endpoints:
    # HTTP/HTTPS endpoint checks
    - name: frontend
      type: http
      url: https://example.com
      enabled: true
      expectedStatus: 200
      maxResponseTime: 3000  # milliseconds
      contentPattern: ""      # Optional: regex pattern to match in response
      timeout: 10             # seconds
      retries: 3
      retryDelay: 2          # seconds

    # API endpoint checks with authentication
    - name: api
      type: api
      url: https://api.example.com/health
      enabled: true
      authentication:
        type: bearer          # bearer, basic, header, apikey
        token: ${API_TOKEN}   # Environment variable
      expectedJsonPath: .status
      expectedValue: ok
      timeout: 15
      retries: 3
      retryDelay: 3

    # MCP server checks
    - name: mcp-server
      type: mcp
      url: https://mcp.example.com
      enabled: true
      testTool: list_tools    # Optional: specific tool to test
      timeout: 20
      retries: 3
      retryDelay: 5

    # SSL/TLS certificate validation
    - name: ssl-certificate
      type: ssl
      hostname: example.com
      port: 443
      enabled: true
      minDaysValid: 30        # Alert if cert expires within this many days
      timeout: 10

  # Performance testing configuration
  performance:
    enabled: true
    url: https://example.com
    concurrentRequests: 50
    totalRequests: 500
    timeout: 10
    thresholds:
      successRate: 95.0       # percentage
      avgResponseTime: 3000   # milliseconds
      p95ResponseTime: 5000   # milliseconds
      p99ResponseTime: 8000   # milliseconds

  # Scheduling options (for continuous monitoring)
  scheduling:
    enabled: false
    interval: 5m              # 5m, 10m, 1h, etc.
    continuous: false         # Run continuously or just once

  # Notification configuration
  notifications:
    enabled: true
    channels:
      - type: slack
        webhookUrl: ${SLACK_WEBHOOK_URL}
        onFailure: true
        onRecovery: true

      - type: email
        recipients:
          - devops@example.com
          - oncall@example.com
        onFailure: true
        onRecovery: false

      - type: pagerduty
        integrationKey: ${PAGERDUTY_KEY}
        severity: critical
        onFailure: true

  # Reporting configuration
  reporting:
    enabled: true
    outputFormat: json        # json, yaml, markdown
    outputPath: /var/log/health-checks
    keepHistory: true
    historyRetention: 30d
    metrics:
      exportPrometheus: true
      prometheusPort: 9090
      exportJson: true
      jsonPath: /var/metrics/health-checks.json
